# JavaUnsafeTree
Java中的Unsafe技术研究


<pre>
Unsafe位于sun.misc包内，看其命名就知道与注重安全性的jdk无缘。
Unsafe的特点是可以直接操作堆外内存，可以随意查看及修改JVM中运行的数据结构。
      可以用来在任意地址位置处读写数据，支持一些CAS原子操作。
Unsafe可以查看和修改对象的成员，Unsafe的操作粒度不是类，而是数据和地址。

Java最初被设计为一种安全的受控环境。尽管如此，HotSpot还是包含了一个后门sun,misc.Unsafe，
提供了一些可以直接操控内存和线程的底层操作。

Unsafe被JDK广泛引用与java.nio和并发包等实现中，这个不安全的类提供了一个观察HotSpot Jvm
内部结构并且对其进行修改。
</pre>

<pre>
应用场景：
          Java中很多基础类库，包括一些广泛使用的高性能开源开发库都是基于Unsafe类开发的，
      比如Netty, Cassandra, Hadoop, Kafka。Unsafe类在提升Java运行效率，增强Java语言
      底层操作能力方面起到了很大的作用。
</pre>

<pre>
Unsafe类提供了如下操作

      1）内存管理
         包括内存分配，释放内存等。

      2）非常规的对象实例化
         
      3）操作类，对象，变量
         通过Unsafe里的方法我们可以获取对象的指针，通过对指针进行偏移，我们不仅可以直接修
      改指针指向的数据，即使是私有数据，甚至可以找到JVM已经认定为垃圾，可以进行回收的对象。

      5）数组操作
      
      6）多线程同步
         包括锁机制，CAS操作等。
         
      7）挂起与恢复
         包括park, unpark方法
         将一个线程挂起是通过park方法实现的，调用park后，线程将一直阻塞到超时或者中断条件
      出现。

      8）内存屏障
         
</pre>